<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#010409">
  <meta name="description"
    content="EVA 01 - Tu Sistema de Acompa√±amiento Emocional 24/7. Resiliencia, Calma y Seguridad.">
  <link rel="manifest" href="manifest.json">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&vault=true&intent=subscription"></script>

  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css">

  <title>EVA 01 - V8.0</title>
</head>

<body>
  <!-- Ambient Background -->
  <div class="atmosphere">
    <div class="glow-orb"></div>
  </div>

  <div class="app-container">

    <!-- ========== SCREEN: WELCOME ========== -->
    <div id="screen-welcome" class="screen active">
      <div class="eva-hero">
        <div class="eva-orb-wrapper">
          <div class="eva-aura"></div>
          <div class="eva-aura"></div>
          <div class="eva-orb" onclick="App.interactWithEva()"></div>
        </div>
        <div class="eva-speech" id="welcome-speech">
          Hola, soy <strong>EVA</strong>. Tu refugio digital dise√±ado para acompa√±arte en cada una de tus emociones.
        </div>
        <div class="mission-tag">No tienes que pasar por esto a solas.</div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fa-solid fa-star"></i> ¬øQu√© es EVA?</div>
        <p style="font-size: 0.9rem; color: var(--text-dim); margin-bottom: 1rem;">
          EVA es un sistema de acompa√±amiento emocional 24/7. Te ofrecemos un espacio seguro para expresar lo que
          sientes y herramientas profesionales para gestionar tu bienestar.
        </p>

        <div class="services-grid">
          <div class="service-pill">
            <i class="fa-solid fa-moon"></i>
            <h6>Calma 24/7</h6>
            <p>Acompa√±amiento constante y escucha activa sin juicios, siempre que lo necesites.</p>
          </div>
          <div class="service-pill">
            <i class="fa-solid fa-life-ring"></i>
            <h6>Gu√≠a S.O.S</h6>
            <p>Protocolos t√©cnicos de respuesta inmediata ante crisis, p√°nico o desborde emocional.</p>
          </div>
          <div class="service-pill">
            <i class="fa-solid fa-brain"></i>
            <h6>Resiliencia</h6>
            <p>Programas de entrenamiento mental para fortalecer tu identidad y amor propio.</p>
          </div>
          <div class="service-pill">
            <i class="fa-solid fa-wave-square"></i>
            <h6>Evoluci√≥n</h6>
            <p>M√©tricas de tu estado de √°nimo para visualizar tu progreso y patrones vitales.</p>
          </div>
        </div>
      </div>

      <div style="margin-top: auto; padding-bottom: 1rem;">
        <button onclick="App.showScreen('onboarding')" class="btn btn-primary" id="btn-register-main">
          <i class="fa-solid fa-user-plus"></i> Crear mi cuenta gratuita
        </button>
        <button onclick="App.handleLoginFlow()" class="btn btn-secondary" style="margin-top:0.75rem;">
          <i class="fa-solid fa-user-astronaut"></i> Ya nos conocemos
        </button>
      </div>
    </div>

    <!-- ========== SCREEN: ONBOARDING (REGISTRO C√ÅLIDO) ========== -->
    <div id="screen-onboarding" class="screen">
      <div style="padding: 1rem 0;">
        <h2 style="font-size: 2.2rem; font-weight: 900; letter-spacing: -2px; line-height: 1;">Tu Refugio Personal</h2>
        <p style="color: var(--text-dim); margin-top: 0.5rem;">Cu√©ntame un poco sobre ti para poder cuidarte mejor.</p>
      </div>

      <div class="card">
        <div class="input-group">
          <label class="input-label">¬øC√≥mo quieres que te llame?</label>
          <input type="text" id="user-name" placeholder="Tu nombre o un apodo cari√±oso">
        </div>

        <div class="input-group">
          <label class="input-label">¬øCu√°ndo naciste? (Es para tu cumple)</label>
          <input type="date" id="user-birth" style="color: #fff;">
        </div>

        <div class="input-group">
          <label class="input-label">Tu correo para estar siempre cerca</label>
          <input type="email" id="user-email" placeholder="amor@ejemplo.com">
        </div>

        <div class="input-group">
          <label class="input-label">¬øEn qu√© quieres que te apoye hoy?</label>
          <select id="user-goal">
            <option value="anxiety">Calmar mi ansiedad</option>
            <option value="loneliness">Sentirme menos solo/a</option>
            <option value="habits">Sentirme mejor f√≠sicamente</option>
            <option value="crisis">Ayuda en momentos de crisis</option>
          </select>
        </div>

        <div class="input-group" style="padding-top: 1rem; border-top: 1px solid var(--glass-border);">
          <label class="input-label">Alguien que te quiera mucho (Emergencia)</label>
          <input type="text" id="em-name" placeholder="Su nombre">
          <input type="tel" id="em-phone" placeholder="Su tel√©fono" style="margin-top:0.5rem;">
        </div>

        <div style="display: flex; align-items: flex-start; gap: 12px; margin: 1.5rem 0;">
          <input type="checkbox" id="accept-terms" style="width: 22px; height: 22px; margin-top: 2px;">
          <label for="accept-terms" style="font-size: 0.75rem; color: var(--text-dim); line-height: 1.4;">
            Acepto que cuides mis datos con amor. <a href="#" onclick="App.showModal('terms')"
              style="color: var(--accent); font-weight:800;">Ver Compromiso</a>.
          </label>
        </div>

        <button onclick="App.handleRegisterSave()" class="btn btn-primary">
          Crear nuestro v√≠nculo <i class="fa-solid fa-heart"></i>
        </button>
      </div>
    </div>

    <!-- ========== SCREEN: PAYMENT ========== -->
    <div id="screen-payment" class="screen">
      <div style="text-align: center; padding: 2.5rem 0;">
        <div class="premium-badge">PREMIUM</div>
        <h2 style="font-size: 2rem; font-weight: 900;">Capacidad Total</h2>
        <p style="color: var(--text-dim);">Acceso a todos los m√≥dulos por <strong>$5 USD</strong>.</p>
      </div>

      <div class="card">
        <div class="card-title text-accent"><i class="fa-solid fa-credit-card"></i> Pasarela Bancaria</div>
        <div class="input-group">
          <label class="input-label">Titular de la tarjeta</label>
          <input type="text" placeholder="Como figura en la tarjeta">
        </div>
        <div class="input-group">
          <label class="input-label">N√∫mero de Tarjeta</label>
          <input type="text" id="card-number" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <div class="card-form-grid">
          <input type="text" id="card-expiry" placeholder="MM/YY">
          <input type="text" id="card-cvc" placeholder="CVV">
        </div>
        <button onclick="App.simulateCardPayment()" class="btn btn-primary">
          Activar Suscripci√≥n <i class="fa-solid fa-lock-keyhole"></i>
        </button>
      </div>

      <div
        style="text-align: center; margin: 1.5rem 0; color: var(--text-dim); font-size: 0.7rem; font-weight: 900; letter-spacing: 2px;">
        ABRIR PUERTA SEGURA</div>

      <!-- CONTENEDOR OFICIAL PAYPAL -->
      <div id="paypal-container-3P8LXQ9DAVWL6" style="margin-top: 1rem;"></div>

      <button onclick="App.showScreen('home')"
        style="background:none; border:none; color: var(--text-dim); text-decoration: underline; margin-top: 1.5rem; cursor:pointer; width:100%; font-size: 0.85rem;">
        Continuar con funciones limitadas
      </button>
    </div>

    <!-- ========== SCREEN: HOME (FOCUS EVA) ========== -->
    <div id="screen-home" class="screen">
      <div style="display: flex; justify-content: flex-end; padding-top: 1rem;">
        <button onclick="App.showScreen('account')"
          style="background: var(--glass); border: 1px solid var(--glass-border); color: white; width: 45px; height: 45px; border-radius: 50%; display: flex; align-items:center; justify-content:center; cursor:pointer;">
          <i class="fa-solid fa-user-astronaut" style="font-size: 1.2rem;"></i>
        </button>
      </div>

      <div class="eva-hero" style="padding-top: 1rem;">
        <div class="eva-orb-wrapper">
          <div class="eva-aura"></div>
          <div class="eva-orb" onclick="App.interactWithEva()"></div>
        </div>
        <div id="eva-message" class="eva-speech">
          Iniciando escucha activa...
        </div>
        <div class="mission-tag">EVA: Tu mentora IA de procesos emocionales y registros.</div>
      </div>

      <div class="card" style="margin-top: -15px; z-index: 10;">
        <p class="text-center"
          style="font-size: 0.7rem; font-weight: 900; color: var(--text-dim); margin-bottom: 1.5rem; letter-spacing: 2.5px; text-transform: uppercase;">
          Estado de Frecuencia Vital</p>

        <div class="mood-grid">
          <div class="mood-option" onclick="App.selectMood(1)" id="mood-1">
            <div class="mood-circle"><i class="fa-solid fa-bolt"></i></div>
            <span style="font-size: 0.6rem; font-weight: 800;">ALERTA</span>
          </div>
          <div class="mood-option" onclick="App.selectMood(2)" id="mood-2">
            <div class="mood-circle"><i class="fa-solid fa-cloud-showers-heavy"></i></div>
            <span style="font-size: 0.6rem; font-weight: 800;">OSCURO</span>
          </div>
          <div class="mood-option" onclick="App.selectMood(3)" id="mood-3">
            <div class="mood-circle"><i class="fa-solid fa-equals"></i></div>
            <span style="font-size: 0.6rem; font-weight: 800;">NEUTRO</span>
          </div>
          <div class="mood-option" onclick="App.selectMood(4)" id="mood-4">
            <div class="mood-circle"><i class="fa-solid fa-sun"></i></div>
            <span style="font-size: 0.6rem; font-weight: 800;">CALMA</span>
          </div>
          <div class="mood-option" onclick="App.selectMood(5)" id="mood-5">
            <div class="mood-circle"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
            <span style="font-size: 0.6rem; font-weight: 800;">VIBRANTE</span>
          </div>
        </div>

        <div style="margin-top: 1.5rem;">
          <textarea id="checkin-note" placeholder="¬øQuieres reportar algo espec√≠fico?" rows="2"></textarea>
          <button onclick="App.saveCheckin()" class="btn btn-primary" style="padding: 1rem;">
            Guardar Frecuencia <i class="fa-solid fa-check-double"></i>
          </button>
        </div>
      </div>

      <nav class="nav-bar">
        <a href="#" class="nav-item active" onclick="App.showScreen('home')"><i
            class="fa-solid fa-house"></i><span>Inicio</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('calm')"><i
            class="fa-solid fa-book-open"></i><span>Lectura</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('sos')"><i
            class="fa-solid fa-life-ring"></i><span>S.O.S</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('history')"><i
            class="fa-solid fa-chart-line"></i><span>Evoluci√≥n</span></a>
      </nav>
    </div>

    <!-- ========== SCREEN: CALM (LECTURA) ========== -->
    <div id="screen-calm" class="screen">
      <div style="padding-bottom: 1.5rem;">
        <h2 style="font-size: 1.8rem; font-weight: 900;">Biblioteca de Calma</h2>
        <p style="color: var(--text-dim);">Entrenamiento para tu fisionom√≠a emocional.</p>
      </div>

      <div class="card-title"><i class="fa-solid fa-wind"></i> Gu√≠as de Sistemas</div>
      <div id="guides-list" style="margin-bottom: 2rem;"></div>

      <div class="card-title"><i class="fa-solid fa-mountain-sun"></i> Programas de Profundidad</div>
      <div id="programs-list"></div>

      <nav class="nav-bar">
        <a href="#" class="nav-item" onclick="App.showScreen('home')"><i
            class="fa-solid fa-house"></i><span>Inicio</span></a>
        <a href="#" class="nav-item active" onclick="App.showScreen('calm')"><i
            class="fa-solid fa-book-open"></i><span>Lectura</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('sos')"><i
            class="fa-solid fa-life-ring"></i><span>S.O.S</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('history')"><i
            class="fa-solid fa-chart-line"></i><span>Evoluci√≥n</span></a>
      </nav>
    </div>

    <!-- ========== SCREEN: SOS (CRISIS) ========== -->
    <div id="screen-sos" class="screen">
      <div style="padding-bottom: 1.5rem;">
        <h2 style="font-size: 1.8rem; font-weight: 900; color: #ef4444;">Centro de Crisis</h2>
        <p style="color: var(--text-dim);">Protocolos de emergencia de respuesta inmediata.</p>
      </div>

      <div class="card" style="background: rgba(239, 68, 68, 0.05); border-color: rgba(239, 68, 68, 0.2);">
        <p style="font-size: 0.8rem; line-height: 1.5;">Si est√°s en peligro f√≠sico o tienes pensamientos de autolesi√≥n,
          por favor contacta a los servicios de emergencia de tu pa√≠s inmediatamente.</p>
      </div>

      <div id="protocols-list"></div>

      <button onclick="App.callEmergencyContact()" class="btn"
        style="background: #ef4444; color: white; margin-top: 1rem;">
        <i class="fa-solid fa-phone-flip"></i> Llamar Contacto de Emergencia
      </button>

      <nav class="nav-bar">
        <a href="#" class="nav-item" onclick="App.showScreen('home')"><i
            class="fa-solid fa-house"></i><span>Inicio</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('calm')"><i
            class="fa-solid fa-book-open"></i><span>Lectura</span></a>
        <a href="#" class="nav-item active" onclick="App.showScreen('sos')"><i
            class="fa-solid fa-life-ring"></i><span>S.O.S</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('history')"><i
            class="fa-solid fa-chart-line"></i><span>Evoluci√≥n</span></a>
      </nav>
    </div>

    <!-- ========== SCREEN: EVOLUTION (HISTORY) ========== -->
    <div id="screen-history" class="screen">
      <div style="padding-bottom: 1.5rem;">
        <h2 style="font-size: 1.8rem; font-weight: 900;">Tu Evoluci√≥n</h2>
        <p style="color: var(--text-dim);">An√°lisis de tu frecuencia vital en los √∫ltimos 30 d√≠as.</p>
      </div>

      <!-- CHART CARD -->
      <div class="card" style="padding: 1.2rem; min-height: 250px;">
        <div class="card-title"><i class="fa-solid fa-chart-line"></i> Mapa de Frecuencia</div>
        <div style="height: 180px; position: relative; width: 100%;">
          <canvas id="moodChart"></canvas>
        </div>
      </div>

      <div class="card-title" style="margin-top: 1rem;"><i class="fa-solid fa-list-ul"></i> Historial Reciente</div>
      <div id="history-items" style="display: flex; flex-direction: column; gap: 12px;"></div>

      <nav class="nav-bar">
        <a href="#" class="nav-item" onclick="App.showScreen('home')"><i
            class="fa-solid fa-house"></i><span>Inicio</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('calm')"><i
            class="fa-solid fa-book-open"></i><span>Lectura</span></a>
        <a href="#" class="nav-item" onclick="App.showScreen('sos')"><i
            class="fa-solid fa-life-ring"></i><span>S.O.S</span></a>
        <a href="#" class="nav-item active" onclick="App.showScreen('history')"><i
            class="fa-solid fa-chart-line"></i><span>Evoluci√≥n</span></a>
      </nav>
    </div>

    <!-- ========== SCREEN: ACCOUNT (NUEVO) ========== -->
    <div id="screen-account" class="screen">
      <div style="padding-bottom: 1.5rem;">
        <h2 style="font-size: 1.8rem; font-weight: 900;">Perfil de Usuario</h2>
        <p style="color: var(--text-dim);">Gesti√≥n de tu identidad digital y seguridad.</p>
      </div>

      <div class="card" id="account-details">
        <!-- Generado por JS -->
      </div>

      <div class="card">
        <div class="card-title"><i class="fa-solid fa-shield-halved"></i> Seguridad</div>
        <button class="btn btn-secondary" style="font-size: 0.8rem; margin-bottom: 0.5rem;"
          onclick="alert('Exportaci√≥n preparada')">Exportar Datos (GDPR)</button>
        <button class="btn"
          style="background: rgba(239, 68, 68, 0.1); color: #ef4444; font-size: 0.8rem; border: 1px solid rgba(239, 68, 68, 0.2);"
          onclick="Storage.clearAll(); location.reload();">Borrar Cuenta</button>
      </div>

      <button onclick="App.showScreen('home')" class="btn btn-primary" style="margin-top: 1rem;">
        Volver al Panel
      </button>
    </div>
  </div>

  <!-- ========== MODALES ========== -->
  <div id="modal-detail" class="modal">
    <div class="modal-content">
      <h3 id="modal-title" style="margin-bottom: 1rem; color: var(--accent);"></h3>
      <div id="modal-body" style="font-size: 0.95rem; line-height: 1.6; color: var(--text);"></div>
      <div id="modal-steps" style="margin-top: 1.5rem;"></div>
      <button onclick="App.closeModal('detail')" class="btn btn-primary" style="margin-top: 2rem;">Cerrar Gu√≠a</button>
    </div>
  </div>

  <div id="modal-success" class="modal">
    <div class="modal-content" style="text-align: center;">
      <div id="success-icon" style="font-size: 3rem; margin-bottom: 1rem;">‚ú®</div>
      <h3 id="success-title" style="margin-bottom: 1rem; color: var(--accent); font-weight: 800;"></h3>
      <p id="success-phrase"
        style="font-style: italic; font-size: 1.1rem; line-height: 1.6; margin-bottom: 1.5rem; color: var(--text);"></p>
      <div
        style="background: rgba(192, 132, 252, 0.1); padding: 1.2rem; border-radius: 18px; border: 1px solid var(--glass-border); margin-bottom: 2rem;">
        <span
          style="display: block; font-size: 0.7rem; font-weight: 900; color: var(--accent); letter-spacing: 1px; margin-bottom: 0.5rem; text-transform: uppercase;">Tu
          Objetivo de Hoy:</span>
        <p id="success-goal" style="font-size: 0.95rem; font-weight: 600; color: #fff; margin: 0;"></p>
      </div>
      <button onclick="App.closeModal('success'); App.showScreen('history');" class="btn btn-primary"
        style="width: 100%;">¬°Acepto el reto! üöÄ</button>
    </div>
  </div>

  <div id="modal-terms" class="modal">
    <div class="modal-content">
      <h3 style="margin-bottom: 1rem; font-weight: 800;">T√©rminos y Privacidad</h3>
      <div class="terms-text" style="font-size: 0.8rem; color: var(--text-dim); line-height: 1.6;">
        <p>EVA es una inteligencia artificial dise√±ada para el acompa√±amiento emocional. Al usar esta aplicaci√≥n,
          aceptas que:</p>
        <p>1. No somos un servicio de emergencia profesional profesional.</p>
        <p>2. Tus datos se almacenan localmente en tu dispositivo.</p>
      </div>
      <button onclick="App.closeModal('terms')" class="btn btn-primary" style="margin-top: 2rem;">Entendido</button>
    </div>
  </div>

  <!-- SCRIPTS EXTERNOS -->
  <script
    src="https://www.paypal.com/sdk/js?client-id=BAAEmrgAqddKgEkUCMlaftiFn-cizBgXYNM03EkUJomHwJxTf2dFNuyGULxVdoKBHCJb3N-WERhitBnXQY&components=hosted-buttons&disable-funding=venmo&currency=USD"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="js/storage.js"></script>
  <script src="js/eva.js"></script>
  <script src="js/app.js"></script>
  <script src="js/subscription.js"></script>

  <!-- Vercel Speed Insights -->
  <script>
    window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/speed-insights/script.js"></script>
</body>

</html>